# Database Structure

## Rooms

| Field        | DataType         | Comments                                    |
| ------------ | ---------------- | ------------------------------------------- |
| id           | bigint           | Primary Key generated by db engine.         |
| name         | string           | Room name.                                  |
| session      | string           | Room Session ID provided by Prosody.        |
| jid          | string           | XMPP Room Jabber ID.                        |
| maxOccupants | integer/nullable | Number of occupants allotted for this room. |
| startedAt    | integer          | Unix Time when the room is created.         |
| endedAt      | integer          | Unix Time when the room is destroyed.       |

## Occupants

| Field     | DataType                       | Comments                                                         |
| --------- | ------------------------------ | ---------------------------------------------------------------- |
| id        | bigint                         | Primary Key generated by db engine.                              |
| jid       | string                         | Jabber ID provided by Prosody.                                   |
| nick      | string                         | Nick name.                                                       |
| email     | string/nullable                | email of the user if provided.                                   |
| avatar    | string/nullable                | avatar image url of the user if provided.                        |
| role      | string (participant/moderator) | user role.                                                       |
| userAgent | string/nullable                | UserAgent retrieved from the session initiation in the prosody.  |
| ip        | string/nullable                | IP address retrieved from the session initiation in the prosody. |
| roomId    | bigint                         | Relation to rooms table.                                         |
| joinedAt  | integer                        | Unix Time when the occupant is joined the room.                  |
| leftAt    | integer                        | Unix Time when the occupant is leave the room.                   |
